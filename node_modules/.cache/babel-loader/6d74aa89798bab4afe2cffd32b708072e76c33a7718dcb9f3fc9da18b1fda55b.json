{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Koszyk(_ref){let{user}=_ref;const[koszyk,setKoszyk]=useState(null);const[totalPrice,setTotalPrice]=useState(0);useEffect(()=>{const fetchKoszyk=async()=>{try{const response=await axios.post(\"https://pizzeriabackend-pizzeriabackendmk.azuremicroservices.io/api/users/koszyk?username=\".concat(user.username));setKoszyk(response.data);}catch(error){console.error('Bład Koszyka:',error);}};fetchKoszyk();},[user]);useEffect(()=>{if(koszyk){let sum=0;koszyk.pizzas.forEach(pizza=>{sum+=pizza.cena;});koszyk.napoje.forEach(napoj=>{sum+=napoj.cena;});setTotalPrice(sum);}},[koszyk]);const handleDeletePizza=async pizzaId=>{try{const response=await axios.post(\"https://pizzeriabackend-pizzeriabackendmk.azuremicroservices.io/api/users/removePizza?pizzaId=\".concat(pizzaId,\"&username=\").concat(user.username));setKoszyk(response.data);}catch(error){console.error('Błąd',error);}};const handleDeleteNapoj=async napojId=>{try{const response=await axios.post(\"https://pizzeriabackend-pizzeriabackendmk.azuremicroservices.io/api/users/removeNapoj?napojId=\".concat(napojId,\"&username=\").concat(user.username));setKoszyk(response.data);}catch(error){console.error('Błąd',error);}};const handleDeleteKoszyk=async()=>{try{const response=await axios.post(\"https://pizzeriabackend-pizzeriabackendmk.azuremicroservices.io/api/users/clearkoszyk?username=\".concat(user.username));setKoszyk(response.data);}catch(error){console.error('Błąd',error);}};const handleCompleteOrder=async()=>{try{const response=await axios.post(\"https://pizzeriabackend-pizzeriabackendmk.azuremicroservices.io/api/users/placeorder?username=\".concat(user.username));setKoszyk(response.data);alert('Zamówienie zostało złożone. Dziękujemy!');}catch(error){console.error('Błąd',error);}};if(!koszyk){return/*#__PURE__*/_jsx(\"center\",{children:/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"})});}return/*#__PURE__*/_jsx(\"center\",{children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Koszyk\"}),/*#__PURE__*/_jsx(\"ul\",{children:koszyk.pizzas.map(pizza=>/*#__PURE__*/_jsxs(\"li\",{children:[pizza.nazwa,\" - Cena: \",pizza.cena,\" PLN | \",/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDeletePizza(pizza.id),children:\"Usu\\u0144\"})]},pizza.id))}),/*#__PURE__*/_jsx(\"ul\",{children:koszyk.napoje.map(napoj=>/*#__PURE__*/_jsxs(\"li\",{children:[napoj.nazwa,\" - Cena: \",napoj.cena,\" PLN | \",/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDeleteNapoj(napoj.id),children:\"Usu\\u0144\"})]},napoj.id))}),\"--------------------------------------------------------------\",/*#__PURE__*/_jsxs(\"h3\",{children:[\"Suma: \",totalPrice.toFixed(2),\" PLN\"]}),(koszyk.pizzas.length>0||koszyk.napoje.length>0)&&/*#__PURE__*/_jsx(\"button\",{onClick:handleCompleteOrder,children:\"Z\\u0142\\xF3\\u017C Zam\\xF3wienie\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDeleteKoszyk(),children:\"Wyczy\\u015B\\u0107 Koszyk\"})]})});}export default Koszyk;","map":{"version":3,"names":["React","useState","useEffect","axios","jsx","_jsx","jsxs","_jsxs","Koszyk","_ref","user","koszyk","setKoszyk","totalPrice","setTotalPrice","fetchKoszyk","response","post","concat","username","data","error","console","sum","pizzas","forEach","pizza","cena","napoje","napoj","handleDeletePizza","pizzaId","handleDeleteNapoj","napojId","handleDeleteKoszyk","handleCompleteOrder","alert","children","map","nazwa","onClick","id","toFixed","length"],"sources":["C:/Users/user/Desktop/Projekt KPCH/Frontend/myapp/src/pages/Koszyk.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\n\r\nfunction Koszyk({ user }) {\r\n    const [koszyk, setKoszyk] = useState(null);\r\n    const [totalPrice, setTotalPrice] = useState(0);\r\n\r\n    useEffect(() => {\r\n        const fetchKoszyk = async () => {\r\n            try {\r\n                const response = await axios.post(`https://pizzeriabackend-pizzeriabackendmk.azuremicroservices.io/api/users/koszyk?username=${user.username}`);\r\n                setKoszyk(response.data);\r\n            } catch (error) {\r\n                console.error('Bład Koszyka:', error);\r\n            }\r\n        };\r\n\r\n        fetchKoszyk();\r\n    }, [user]);\r\n\r\n    useEffect(() => {\r\n        if (koszyk) {\r\n            let sum = 0;\r\n            koszyk.pizzas.forEach(pizza => {\r\n                sum += pizza.cena;\r\n            });\r\n            koszyk.napoje.forEach(napoj => {\r\n                sum += napoj.cena;\r\n            });\r\n            setTotalPrice(sum);\r\n        }\r\n    }, [koszyk]);\r\n\r\n    const handleDeletePizza = async (pizzaId) => {\r\n        try {\r\n          const response = await axios.post(`https://pizzeriabackend-pizzeriabackendmk.azuremicroservices.io/api/users/removePizza?pizzaId=${pizzaId}&username=${user.username}`);\r\n          setKoszyk(response.data);\r\n        } catch (error) {\r\n          console.error('Błąd', error);\r\n        }\r\n      };\r\n\r\n    \r\n      const handleDeleteNapoj = async (napojId) => {\r\n        try {\r\n          const response = await axios.post(`https://pizzeriabackend-pizzeriabackendmk.azuremicroservices.io/api/users/removeNapoj?napojId=${napojId}&username=${user.username}`);\r\n          setKoszyk(response.data);\r\n        } catch (error) {\r\n          console.error('Błąd', error);\r\n        }\r\n      };  \r\n\r\n\r\n      const handleDeleteKoszyk = async () => {\r\n        try {\r\n          const response = await axios.post(`https://pizzeriabackend-pizzeriabackendmk.azuremicroservices.io/api/users/clearkoszyk?username=${user.username}`);\r\n          setKoszyk(response.data);\r\n        } catch (error) {\r\n          console.error('Błąd', error);\r\n        }\r\n      };\r\n      \r\n      const handleCompleteOrder = async () => {\r\n        try {\r\n          const response = await axios.post(`https://pizzeriabackend-pizzeriabackendmk.azuremicroservices.io/api/users/placeorder?username=${user.username}`);\r\n          setKoszyk(response.data);\r\n          alert('Zamówienie zostało złożone. Dziękujemy!');\r\n        } catch (error) {\r\n          console.error('Błąd', error);\r\n        }\r\n      };  \r\n      \r\n\r\n    if (!koszyk) {\r\n        return <center><div>Loading...</div></center>\r\n    }\r\n\r\n    return (\r\n        <center>\r\n        <div>\r\n            <h2>Koszyk</h2>\r\n            <ul>\r\n                {koszyk.pizzas.map(pizza => (\r\n                    <li key={pizza.id}>{pizza.nazwa} - Cena: {pizza.cena} PLN | <button onClick={() => handleDeletePizza(pizza.id)}>Usuń</button></li>\r\n                ))}\r\n            </ul>\r\n            <ul>\r\n                {koszyk.napoje.map(napoj => (\r\n                    <li key={napoj.id}>{napoj.nazwa} - Cena: {napoj.cena} PLN | <button onClick={() => handleDeleteNapoj(napoj.id)}>Usuń</button></li>\r\n                ))}\r\n            </ul>\r\n            --------------------------------------------------------------\r\n            <h3>Suma: {totalPrice.toFixed(2)} PLN</h3>\r\n            {(koszyk.pizzas.length > 0 || koszyk.napoje.length > 0) && (\r\n                <button onClick={handleCompleteOrder}>Złóż Zamówienie</button>\r\n            )}\r\n            <button onClick={() => handleDeleteKoszyk()}>Wyczyść Koszyk</button>\r\n        </div>\r\n        </center>\r\n    );\r\n}\r\n\r\nexport default Koszyk;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}