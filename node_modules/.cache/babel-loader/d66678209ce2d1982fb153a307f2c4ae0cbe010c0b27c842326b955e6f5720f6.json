{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";function Profile(_ref){let{user}=_ref;const[orders,setOrders]=useState([]);useEffect(()=>{const fetchOrders=async()=>{try{const response=await axios.post(\"https://pizzeriabackend-pizzeriabackendmk.azuremicroservices.io/api/users/orders?username=\".concat(user.username));setOrders(response.data);}catch(error){console.error(error);}};fetchOrders();},[user]);const formatDate=dateString=>{const date=new Date(dateString);const year=date.getFullYear();const month=String(date.getMonth()+1).padStart(2,'0');const day=String(date.getDate()).padStart(2,'0');return\"\".concat(year,\"-\").concat(month,\"-\").concat(day);};const handleShowConfirmation=async orderId=>{try{const response=await axios.post(\"https://pizzeriabackend-pizzeriabackendmk.azuremicroservices.io/api/users/orderConfirmation?orderId=\".concat(orderId));alert(response.data);}catch(error){console.error('Błąd podczas pobierania potwierdzenia:',error);}};return/*#__PURE__*/_jsx(\"center\",{children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"Witaj, \",user.username,\"!\"]}),/*#__PURE__*/_jsx(\"h2\",{children:\"Twoja Historia Zam\\xF3wie\\u0144:\"}),orders.map(order=>/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"Data zam\\xF3wienia: \",formatDate(order.dataZamowienia)]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Status zam\\xF3wienia: \",order.stanZamowienia]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Cena zam\\xF3wienia: \",order.cenaZamowienia,\" PLN\"]}),/*#__PURE__*/_jsx(\"p\",{children:\"Zam\\xF3wione Produkty:\"}),/*#__PURE__*/_jsx(\"ul\",{children:order.pizzasZamowione.map(pizza=>/*#__PURE__*/_jsxs(\"li\",{children:[\"Pizza \",pizza.nazwa,\" \",pizza.rozmiar]},pizza.id))}),/*#__PURE__*/_jsx(\"ul\",{children:order.napojeZamowione.map(napoj=>/*#__PURE__*/_jsxs(\"li\",{children:[napoj.nazwa,\" \",napoj.typOpakowania]},napoj.id))}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleShowConfirmation(order.id),children:\"Poka\\u017C Potwierdzenie\"}),/*#__PURE__*/_jsx(\"p\",{children:\"---------------------------------------------------------------------------------\"})]},order.id))]})});};export default Profile;","map":{"version":3,"names":["React","useState","useEffect","axios","jsxs","_jsxs","jsx","_jsx","Profile","_ref","user","orders","setOrders","fetchOrders","response","post","concat","username","data","error","console","formatDate","dateString","date","Date","year","getFullYear","month","String","getMonth","padStart","day","getDate","handleShowConfirmation","orderId","alert","children","map","order","dataZamowienia","stanZamowienia","cenaZamowienia","pizzasZamowione","pizza","nazwa","rozmiar","id","napojeZamowione","napoj","typOpakowania","onClick"],"sources":["C:/Users/user/Desktop/Projekt KPCH/Frontend/myapp/src/pages/Profile.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\n\r\nfunction Profile({ user }) {\r\n    const [orders, setOrders] = useState([]);\r\n\r\n    useEffect(() => {\r\n        const fetchOrders = async () => {\r\n            try {\r\n                const response = await axios.post(`https://pizzeriabackend-pizzeriabackendmk.azuremicroservices.io/api/users/orders?username=${user.username}`);\r\n                setOrders(response.data);\r\n            } catch (error) {\r\n                console.error(error);\r\n            }\r\n        };\r\n\r\n        fetchOrders();\r\n    }, [user]);\r\n\r\n\r\n\r\n    const formatDate = (dateString) => {\r\n        const date = new Date(dateString);\r\n        const year = date.getFullYear();\r\n        const month = String(date.getMonth() + 1).padStart(2, '0');\r\n        const day = String(date.getDate()).padStart(2, '0');\r\n        return `${year}-${month}-${day}`;\r\n    };\r\n\r\n\r\n\r\n\r\n    const handleShowConfirmation = async (orderId) => {\r\n        try {\r\n            const response = await axios.post(`https://pizzeriabackend-pizzeriabackendmk.azuremicroservices.io/api/users/orderConfirmation?orderId=${orderId}`);\r\n            alert(response.data);\r\n        } catch (error) {\r\n            console.error('Błąd podczas pobierania potwierdzenia:', error);\r\n        }\r\n    };\r\n\r\n\r\n\r\n    return (\r\n        <center>\r\n            <div>\r\n                <h2>Witaj, {user.username}!</h2>\r\n                <h2>Twoja Historia Zamówień:</h2>\r\n                {orders.map(order => (\r\n                    <div key={order.id}>\r\n                        <p>Data zamówienia: {formatDate(order.dataZamowienia)}</p>\r\n                        <p>Status zamówienia: {order.stanZamowienia}</p>\r\n                        <p>Cena zamówienia: {order.cenaZamowienia} PLN</p>\r\n                        <p>Zamówione Produkty:</p>\r\n                        <ul>\r\n                            {order.pizzasZamowione.map(pizza => (\r\n                                <li key={pizza.id}>Pizza {pizza.nazwa} {pizza.rozmiar}</li>\r\n                            ))}\r\n                        </ul>\r\n                        <ul>\r\n                            {order.napojeZamowione.map(napoj => (\r\n                                <li key={napoj.id}>{napoj.nazwa} {napoj.typOpakowania}</li>\r\n                            ))}\r\n                        </ul>\r\n                        <button onClick={() => handleShowConfirmation(order.id)}>Pokaż Potwierdzenie</button>\r\n                        <p>---------------------------------------------------------------------------------</p>\r\n                    </div>\r\n                ))}\r\n            </div>\r\n        </center>\r\n    );\r\n};\r\n\r\nexport default Profile;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}