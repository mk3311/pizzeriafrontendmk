{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Link}from\"react-router-dom\";import axios from'axios';import'./style/Menu.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function NapojMenu(_ref){let{user}=_ref;const[napoje,setNapoje]=useState([]);const[searchTerm,setSearchTerm]=useState('');useEffect(()=>{axios.get('https://pizzeriabackend-pizzeriabackendmk.azuremicroservices.io/api/napoje').then(response=>setNapoje(response.data)).catch(error=>console.error(error));},[]);const handleDeleteNapoj=async napojId=>{try{await axios.delete(\"https://pizzeriabackend-pizzeriabackendmk.azuremicroservices.io/api/napoje/\".concat(napojId));const response=await axios.get('/api/napoje');setNapoje(response.data);}catch(error){console.error('Błąd',error);}};const handleAddToCart=async napojId=>{try{const response=await axios.post(\"https://pizzeriabackend-pizzeriabackendmk.azuremicroservices.io/api/users/addNapoj?napojId=\".concat(napojId,\"&username=\").concat(user.username));console.log('Napój added to cart:',response.data);alert('Napój dodano do Koszyka');}catch(error){console.error('Error adding napoj to cart:',error);alert('Nie można dodać Napoju do koszyka');}};const handleChange=event=>{setSearchTerm(event.target.value);};const handleSearchNapoj=async event=>{event.preventDefault();try{const response=await axios.post(\"https://pizzeriabackend-pizzeriabackendmk.azuremicroservices.io/api/napoje/searchNapoj?searchText=\".concat(searchTerm));setNapoje(response.data);}catch(error){console.error('Błąd podczas wyszukiwania napoju:',error);}};return/*#__PURE__*/_jsx(\"center\",{children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Menu\"}),/*#__PURE__*/_jsxs(\"h3\",{children:[/*#__PURE__*/_jsx(Link,{to:\"/menu\",children:\"Pizze\"}),\" | \",/*#__PURE__*/_jsx(Link,{to:\"/menuNapoje\",children:\"Napoje\"})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSearchNapoj,children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"Nazwa:\",/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"nazwa\",value:searchTerm,onChange:handleChange})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Szukaj\"})]}),/*#__PURE__*/_jsxs(\"table\",{className:\"menu-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Nazwa\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Cena\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Typ Opakowania\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Czy Dost\\u0119pna\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:napoje.map(napoj=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:napoj.nazwa}),/*#__PURE__*/_jsxs(\"td\",{children:[napoj.cena,\" PLN\"]}),/*#__PURE__*/_jsx(\"td\",{children:napoj.typOpakowania}),/*#__PURE__*/_jsx(\"td\",{children:napoj.czyDostepna?'Tak':'Nie'}),user&&napoj.czyDostepna&&/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"ButtonPizza\",onClick:()=>handleAddToCart(napoj.id),children:\"Dodaj do Koszyka\"})}),user&&user.username==='admin'&&/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"ButtonPizza\",onClick:()=>handleDeleteNapoj(napoj.id),children:\"Usu\\u0144\"})}),user&&user.username==='admin'&&/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Link,{to:\"/editnapoj/\".concat(napoj.id),className:\"ButtonPizza\",children:\"Edytuj\"})})]},napoj.id))})]}),user&&user.username==='admin'&&/*#__PURE__*/_jsx(Link,{to:\"/addnapoj\",class:\"ButtonPizza\",children:\"Dodaj Nap\\xF3j\"})]})});};export default NapojMenu;","map":{"version":3,"names":["React","useState","useEffect","Link","axios","jsx","_jsx","jsxs","_jsxs","NapojMenu","_ref","user","napoje","setNapoje","searchTerm","setSearchTerm","get","then","response","data","catch","error","console","handleDeleteNapoj","napojId","delete","concat","handleAddToCart","post","username","log","alert","handleChange","event","target","value","handleSearchNapoj","preventDefault","children","to","onSubmit","type","name","onChange","className","map","napoj","nazwa","cena","typOpakowania","czyDostepna","onClick","id","class"],"sources":["C:/Users/user/Desktop/Projekt KPCH/Frontend/myapp/src/pages/NapojMenu.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Link } from \"react-router-dom\";\r\nimport axios from 'axios';\r\nimport './style/Menu.css';\r\n\r\nfunction NapojMenu({ user }) {\r\n    const [napoje, setNapoje] = useState([]);\r\n    const [searchTerm, setSearchTerm] = useState('');\r\n\r\n    useEffect(() => {\r\n        axios.get('https://pizzeriabackend-pizzeriabackendmk.azuremicroservices.io/api/napoje')\r\n            .then(response => setNapoje(response.data))\r\n            .catch(error => console.error(error));\r\n    }, []);\r\n\r\n    const handleDeleteNapoj = async (napojId) => {\r\n        try {\r\n          await axios.delete(`https://pizzeriabackend-pizzeriabackendmk.azuremicroservices.io/api/napoje/${napojId}`);\r\n          const response = await axios.get('/api/napoje');\r\n          setNapoje(response.data);\r\n        } catch (error) {\r\n          console.error('Błąd', error);\r\n        }\r\n      };\r\n\r\n      const handleAddToCart = async (napojId) => {\r\n        try {\r\n            const response = await axios.post(`https://pizzeriabackend-pizzeriabackendmk.azuremicroservices.io/api/users/addNapoj?napojId=${napojId}&username=${user.username}`);\r\n            console.log('Napój added to cart:', response.data);\r\n            alert('Napój dodano do Koszyka');\r\n        } catch (error) {\r\n            console.error('Error adding napoj to cart:', error);\r\n            alert('Nie można dodać Napoju do koszyka');\r\n        }\r\n    };\r\n\r\n\r\n    const handleChange = (event) => {\r\n        setSearchTerm(event.target.value);\r\n    };\r\n\r\n    const handleSearchNapoj = async (event) => {\r\n        event.preventDefault();\r\n        \r\n        try {\r\n            const response = await axios.post(`https://pizzeriabackend-pizzeriabackendmk.azuremicroservices.io/api/napoje/searchNapoj?searchText=${searchTerm}`);\r\n            setNapoje(response.data);\r\n        } catch (error) {\r\n            console.error('Błąd podczas wyszukiwania napoju:', error);\r\n        }\r\n    };\r\n\r\n\r\n\r\n\r\n    return (\r\n        <center>\r\n        <div>\r\n        <h2>Menu</h2>\r\n        <h3><Link to=\"/menu\">Pizze</Link> | <Link to=\"/menuNapoje\">Napoje</Link></h3>\r\n\r\n\r\n        <form onSubmit={handleSearchNapoj}>\r\n        <label>\r\n          Nazwa:\r\n          <input\r\n            type=\"text\"\r\n            name=\"nazwa\"\r\n            value={searchTerm}\r\n            onChange={handleChange}\r\n          />\r\n        </label>\r\n        <button type=\"submit\">Szukaj</button>\r\n        </form>\r\n\r\n\r\n\r\n        <table className=\"menu-table\">\r\n            <thead>\r\n                <tr>\r\n                    <th>Nazwa</th>\r\n                    <th>Cena</th>\r\n                    <th>Typ Opakowania</th>\r\n                    <th>Czy Dostępna</th>\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                {napoje.map(napoj => (\r\n                    <tr key={napoj.id}>\r\n                        <td>{napoj.nazwa}</td>\r\n                        <td>{napoj.cena} PLN</td>\r\n                        <td>{napoj.typOpakowania}</td>\r\n                        <td>{napoj.czyDostepna ? 'Tak' : 'Nie'}</td>\r\n                        {user && napoj.czyDostepna && (\r\n                            <td>\r\n                                <button className=\"ButtonPizza\" onClick={() => handleAddToCart(napoj.id)}>Dodaj do Koszyka</button>\r\n                            </td>\r\n                        )}\r\n                        {user && user.username === 'admin' && (<td>\r\n                        <button className=\"ButtonPizza\" onClick={() => handleDeleteNapoj(napoj.id)}>Usuń</button>\r\n                        </td>)}\r\n                        {user && user.username === 'admin' && (<td>\r\n                            <Link to={`/editnapoj/${napoj.id}`} className=\"ButtonPizza\">Edytuj</Link>\r\n                        </td>)}\r\n                    </tr>\r\n                ))}\r\n            </tbody>\r\n        </table>\r\n        {user && user.username === 'admin' && <Link to=\"/addnapoj\" class=\"ButtonPizza\">Dodaj Napój</Link>}\r\n    </div>\r\n    \r\n    </center>\r\n);\r\n};\r\n    \r\n    export default NapojMenu;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}